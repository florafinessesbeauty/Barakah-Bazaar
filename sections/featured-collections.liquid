{% schema %}
{
  "name": "Featured collections",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "Featured collections" },
    { "type": "collection_list", "id": "collections", "label": "Collections" }
  ],
  "presets": [{ "name": "Featured collections" }]
}
{% endschema %}

<section class="section">
  <div class="container">
    {% if section.settings.heading != blank %}
      <h2 style="margin:0 0 .75rem">{{ section.settings.heading }}</h2>
    {% endif %}

    <div class="grid grid--3">
      {% for collection in section.settings.collections %}
        <a class="card" href="{{ collection.url }}">
          {% if collection.image %}
            <img src="{{ collection.image | image_url: width: 800 }}" alt="{{ collection.title | escape }}">
          {% elsif collection.products.first.featured_image %}
            <img src="{{ collection.products.first.featured_image | image_url: width: 800 }}" alt="{{ collection.title | escape }}">
          {% endif %}
          <div class="card__body">
            <div class="card__title">{{ collection.title }}</div>
            <div style="color:#666">{{ collection.all_products_count }} products</div>
          </div>
        </a>
      {% else %}
        <p>No collections selected.</p>
      {% endfor %}
    </div>
  </div>
</section>
